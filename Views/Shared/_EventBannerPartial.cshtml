@model PaginationResponse<HaBuddies.Models.Event>
@using HaBuddies.Constants

@if (Model.Count > 0) {
    @foreach (HaBuddies.Models.Event evt in Model.Data)
    {
        if (evt.IsOpen == true) {
            var category = evt.Category;
            var currentEnroll = 0;
            
            <div class="banner" id="@evt.Id">
                <a draggable="false" asp-controller="Event" asp-action="Details" asp-route-id="@evt.Id">
                    <div class="evt-heading">
                        <div class="category" style="background-color: @Category.GetColorHex(category)">
                            @Html.Raw(Category.GetIconHtml(category))
                            <span class="evt-category">@category</span>
                        </div>
                        <h2 class="evt-title">@evt.Title</h2>
                        <span class="evt-enrollsize @(currentEnroll<evt.EnrollSize?"vacant":"full")">
                            @currentEnroll/@evt.EnrollSize <i class="fa-solid fa-user-group"></i>
                        </span>
                    </div>
                    <div class="evt-body">
                        <span class="evt-description">@evt.Description</span>
                        <span class="evt-enddate">Close Date<br>@evt.EndDate.ToShortDateString()</span>
                    </div>
                </a>
                <button type="button" class="evt-join" onclick="myFunction(this, 'red')">เข้าร่วม</button>
            </div>
        }
    }
    <script>
        function myFunction(element, color) {
            var bannerId = element.parentElement.id;
            alert("Join " + bannerId);
        }
    </script>
}
else {
    <div class="no-event">
        <img src="https://img.freepik.com/free-vector/group-therapy-illustration-concept_52683-45727.jpg?t=st=1709623373~exp=1709626973~hmac=78df7e8d67f4c5f6b0d06d0113b240ce820bf4d30f74051aaf195c505371a8d0" alt="no_event">
        <h2>No events yet</h2>
        <p>It has been quiet recently. Let's create some new events!</p>
        <a class="create-event" asp-area="" asp-controller="Event" asp-action="Create">Create event</a>
    </div>
}